---
title: "BMI Calculator"
author: "Jane Chen"
date: "13/05/2017"
output: ioslides_presentation
---

```{r echo = FALSE, results = FALSE}
options(digits = 1)
```

## Overview of "BMI Calculator" | A brief Description {.build}

The app is written using the R `shiny` package. This main tab is the BMI calculator, which takes the weight and height as input and calculates the BMI using the formula weight over height squares. 
The app then take the calculated BMI and produces an interpretation whether the entered weight is a normal (healthy) weight for the height entered. 

The second tab gives some brief information about the Body Mass Index and shows a more detailed categories table for BMI. 

## Example {.smaller}

For example, this is a mini version of the BMI Calculator app. 

 - height = 1.72 m and 
 - weight = 58 kg. 

```{r, echo = FALSE}
library(shiny)
library(miniUI)

shinyApp(
    ui <- fluidPage(
        gadgetTitleBar("BMI Calculator"), 
        sidebarPanel(
            h3("Calculate your BMI"), 
            selectInput("unit", "Units", choices = c("Metric", "Imperial")), 
            numericInput("height", "Height (m or in)", value = 1.72), 
            numericInput("weight", "Weight (kg or lb)", value = 58), 
            submitButton("Calculate")
        ), 
        mainPanel(
            h4(textOutput("n_result")), 
            h4(textOutput("t_result"))
        )
    ), 
    server <- function(input, output){
        bmi <- reactive({
            if (input$unit == "Metric") input$weight / (input$height^2) 
            else input$weight / (input$height^2) * 703
        })
        result <- reactive ({
            if(bmi() < 18.5) "Underweight"
            else if (bmi() > 18.5 & bmi() < 25) "Normal Weight"
            else if (bmi() > 25 & bmi() < 30) "Overweight"
            else if (bmi() > 30) "Obese"
        })
        output$n_result <- renderText(paste("BMI: ", round(bmi(), digits = 1)))
        output$t_result <- renderText(result())
    }, 
    options = list(height = 400)
)

```

## Formula 

The formula behind the app is simplified as below. 

```{r }
h <- 1.72
w <- 58
### <b>
bmi <- w/h^2
### </b>
if (bmi < 18.5) result <- "Underweight"
if (bmi > 18.5 & bmi < 25) result <- "Normal (Healthy) Weight"
if (bmi > 25 & bmi < 30) result <- "Overweight"
if (bmi > 30) result < -"Obese"
```

So the BMI for this person is `r bmi`, and is within the `r result` range. 

## Metric vs. Imperial Formula

There are slightly different formula for metric and imperial units. The following code was written in the `server.R` file to ensure the correct formula is used. 

```{r eval = FALSE}
bmi <- reactive({
    if (input$unit == "Metric") input$weight / (input$height^2) 
    else input$weight / (input$height^2) * 703
})
```